# ะัะฐะบัะธัะตัะบะฐั ัะฐะฑะพัะฐ - ะะฐะทัะฐะฑะพัะบะฐ ัะฐัะฟัะตะดะตะปะตะฝะฝะพะน ัะธััะตะผั ะฐะณัะตะณะฐัะธะธ ะฟัะพะณะฝะพะทะพะฒ ะฟะพะณะพะดั ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Spring Boot ะธ RabbitMQ
##  ะฆะตะปั ัะฐะฑะพัั

ะฆะตะปัั ะดะฐะฝะฝะพะน ะปะฐะฑะพัะฐัะพัะฝะพะน ัะฐะฑะพัั ัะฒะปัะตััั ะฟะพะปััะตะฝะธะต ะฟัะฐะบัะธัะตัะบะธั ะฝะฐะฒัะบะพะฒ ะฒ ัะฐะทัะฐะฑะพัะบะต ัะฐัะฟัะตะดะตะปะตะฝะฝัั ัะธััะตะผ
ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะผะธะบัะพัะตัะฒะธัะฝะพะน ะฐััะธัะตะบัััั, ะฑัะพะบะตัะฐ ัะพะพะฑัะตะฝะธะน RabbitMQ ะธ ัะตะฐะปะธะทะฐัะธะธ ะธะฝัะตะณัะฐัะธะพะฝะฝัั ะฟะฐััะตัะฝะพะฒ (Enterprise Integration Patterns). ะะพ ะทะฐะฒะตััะตะฝะธะธ ัะฐะฑะพัั ัััะดะตะฝัั ัะพะทะดะฐะดัั ะฟะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝะพะต ะฟัะธะปะพะถะตะฝะธะต
ะดะปั ะฐัะธะฝััะพะฝะฝะพะน ะฐะณัะตะณะฐัะธะธ ะดะฐะฝะฝัั ะธะท ะฒะฝะตัะฝะตะณะพ API.

---

ะขะตัะฝะพะปะพะณะธะธ: Spring Boot 3.2.0, RabbitMQ 3.x, Java 17, Maven, Docker

---

ะ ัะพะฒัะตะผะตะฝะฝัั ัะฐัะฟัะตะดะตะปะตะฝะฝัั ัะธััะตะผะฐั ะบะพะผะฟะพะฝะตะฝัั (ะผะธะบัะพัะตัะฒะธัั) ะดะพะปะถะฝั ัััะตะบัะธะฒะฝะพ ะพะฑะผะตะฝะธะฒะฐัััั ะดะฐะฝะฝัะผะธ. ะััะผัะต ะฒัะทะพะฒั (ะฝะฐะฟัะธะผะตั, ัะตัะตะท REST API) ัะพะทะดะฐัั ัะธะปัะฝัั ัะฒัะทะฐะฝะฝะพััั ะผะตะถะดั ัะตัะฒะธัะฐะผะธ. ะัะปะธ ะพะดะธะฝ ัะตัะฒะธั ะฝะตะดะพัััะฟะตะฝ, ะฒัั ัะตะฟะพัะบะฐ ะฒัะทะพะฒะพะฒ ะผะพะถะตั ะฟัะตัะฒะฐัััั. 

---

**ะกะธััะตะผั ะพะฑะผะตะฝะฐ ัะพะพะฑัะตะฝะธัะผะธ (Message Queuing)** ัะตัะฐัั ััั ะฟัะพะฑะปะตะผั, ะฒะฒะพะดั ะฟัะพะผะตะถััะพัะฝัะน ะบะพะผะฟะพะฝะตะฝั โ **ะฑัะพะบะตั ัะพะพะฑัะตะฝะธะน**. ะกะตัะฒะธัั ะฝะต ะพะฑัะฐัััั ะดััะณ ั ะดััะณะพะผ ะฝะฐะฟััะผัั, ะฐ ะพัะฟัะฐะฒะปััั ัะพะพะฑัะตะฝะธั ะฒ ะพัะตัะตะดั. ะััะณะธะต ัะตัะฒะธัั ะฟะพะดะฟะธััะฒะฐัััั ะฝะฐ ััะธ ะพัะตัะตะดะธ ะธ ะทะฐะฑะธัะฐัั ัะพะพะฑัะตะฝะธั ะดะปั ะพะฑัะฐะฑะพัะบะธ ะฟะพ ะผะตัะต ะฒะพะทะผะพะถะฝะพััะธ. ะญัะพ ะพะฑะตัะฟะตัะธะฒะฐะตั **ัะปะฐะฑัั ัะฒัะทะฐะฝะฝะพััั** ะธ **ะฐัะธะฝััะพะฝะฝะพััั**.

---

**RabbitMQ** โ ััะพ ะพะดะธะฝ ะธะท ัะฐะผัั ะฟะพะฟัะปััะฝัั ะฑัะพะบะตัะพะฒ ัะพะพะฑัะตะฝะธะน ั ะพัะบััััะผ ะธััะพะดะฝัะผ ะบะพะดะพะผ. ะะฝ ัะตะฐะปะธะทัะตั ะฟัะพัะพะบะพะป AMQP (Advanced Message Queuing Protocol) ะธ ะฟัะตะดะพััะฐะฒะปัะตั ะฝะฐะดะตะถะฝัะน ะผะตัะฐะฝะธะทะผ ะดะปั ะฐัะธะฝััะพะฝะฝะพะน ะดะพััะฐะฒะบะธ ัะพะพะฑัะตะฝะธะน.

---

**ะัะฝะพะฒะฝัะต ะบะพะฝัะตะฟัะธะธ RabbitMQ:**
- **Producer:** ะัะธะปะพะถะตะฝะธะต, ะบะพัะพัะพะต ะพัะฟัะฐะฒะปัะตั ัะพะพะฑัะตะฝะธั.
- **Consumer:** ะัะธะปะพะถะตะฝะธะต, ะบะพัะพัะพะต ะฟะพะปััะฐะตั ัะพะพะฑัะตะฝะธั.
- **Queue:** ะัะตัะตะดั, ะฑััะตั ะดะปั ััะฐะฝะตะฝะธั ัะพะพะฑัะตะฝะธะน.
- **Exchange:** ะขะพัะบะฐ ะพะฑะผะตะฝะฐ, ะบะพัะพัะฐั ะฟะพะปััะฐะตั ัะพะพะฑัะตะฝะธั ะพั Producer ะธ ะฝะฐะฟัะฐะฒะปัะตั ะธั ะฒ ะพะดะฝั ะธะปะธ ะฝะตัะบะพะปัะบะพ ะพัะตัะตะดะตะน. ะขะธะฟ exchange (Direct, Topic, Fanout) ะพะฟัะตะดะตะปัะตั ะปะพะณะธะบั ะผะฐัััััะธะทะฐัะธะธ.
- **Binding:** ะัะฐะฒะธะปะพ, ะบะพัะพัะพะต ัะฒัะทัะฒะฐะตั exchange ั ะพัะตัะตะดัั.

---

**Enterprise Integration Patterns (EIP)**

EIP โ ััะพ ะบะฐัะฐะปะพะณ ะฟัะพะฒะตัะตะฝะฝัั ัะตัะตะฝะธะน ะดะปั ัะธะฟะธัะฝัั ะทะฐะดะฐั ะธะฝัะตะณัะฐัะธะธ ะบะพัะฟะพัะฐัะธะฒะฝัั ะฟัะธะปะพะถะตะฝะธะน. ะ ะดะฐะฝะฝะพะน
ัะฐะฑะพัะต ะผั ัะตะฐะปะธะทัะตะผ ะฝะตัะบะพะปัะบะพ ะบะปััะตะฒัั ะฟะฐััะตัะฝะพะฒ.

---

**Message Channel**

ะะฐะฝะฐะป ัะพะพะฑัะตะฝะธะน โ ััะพ ะฑะฐะทะพะฒัะน ะฟะฐััะตัะฝ, ะฟัะตะดััะฐะฒะปัััะธะน ัะพะฑะพะน ะฒะธัััะฐะปัะฝัะน ะบะฐะฝะฐะป, ะฟะพ ะบะพัะพัะพะผั ัะพะพะฑัะตะฝะธั ะฟะตัะตะดะฐัััั ะพั ะพะดะฝะพะณะพ ะบะพะผะฟะพะฝะตะฝัะฐ ะบ ะดััะณะพะผั. ะ RabbitMQ ัะพะปั ะบะฐะฝะฐะปะพะฒ ะฒัะฟะพะปะฝััั ะพัะตัะตะดะธ.

---

**Message Router**

ะะฐัััััะธะทะฐัะพั ัะพะพะฑัะตะฝะธะน ะฟะพะปััะฐะตั ัะพะพะฑัะตะฝะธะต ะธ ะฝะฐะฟัะฐะฒะปัะตั ะตะณะพ ะฒ ะพะดะธะฝ ะธะท ะฝะตัะบะพะปัะบะธั ะบะฐะฝะฐะปะพะฒ ะฝะฐ ะพัะฝะพะฒะต ะพะฟัะตะดะตะปะตะฝะฝัั ััะปะพะฒะธะน. ะ ะฝะฐัะตะผ ะฟัะพะตะบัะต weather-api-service ะฑัะดะตั ะฒััััะฟะฐัั ะฒ ัะพะปะธ ะผะฐัััััะธะทะฐัะพัะฐ, ัะฐะทะฑะธะฒะฐั ะพะดะธะฝ
ะฒัะพะดััะธะน ะทะฐะฟัะพั ะฝะฐ ะผะฝะพะถะตััะฒะพ ัะพะพะฑัะตะฝะธะน ะดะปั ะบะฐะถะดะพะณะพ ะณะพัะพะดะฐ.

---

**Request-Reply**

ะะฐััะตัะฝ ะดะปั ัะตะฐะปะธะทะฐัะธะธ ะดะฒัััะพัะพะฝะฝะตะน ะบะพะผะผัะฝะธะบะฐัะธะธ. ะัะฟัะฐะฒะธัะตะปั ะฟะพััะปะฐะตั ัะพะพะฑัะตะฝะธะต-ะทะฐะฟัะพั ะธ ะพะถะธะดะฐะตั
ัะพะพะฑัะตะฝะธะต-ะพัะฒะตั. ะ ะฐัะธะฝััะพะฝะฝะพะผ ะผะธัะต ััะพ ัะตะฐะปะธะทัะตััั ั ะฟะพะผะพััั ะดะฒัั ะบะฐะฝะฐะปะพะฒ (ะพะดะธะฝ ะดะปั ะทะฐะฟัะพัะพะฒ, ะดััะณะพะน ะดะปั
ะพัะฒะตัะพะฒ) ะธ Correlation ID โ ัะฝะธะบะฐะปัะฝะพะณะพ ะธะดะตะฝัะธัะธะบะฐัะพัะฐ, ะบะพัะพััะน ะฟัะธัััััะฒัะตั ะบะฐะบ ะฒ ะทะฐะฟัะพัะต, ัะฐะบ ะธ ะฒ ะพัะฒะตัะต,
ะฟะพะทะฒะพะปัั ัะพะฟะพััะฐะฒะธัั ะธั.

---

**Aggregator**
ะะณัะตะณะฐัะพั โ ััะพ ะบะพะผะฟะพะฝะตะฝั, ะบะพัะพััะน ะฟะพะปััะฐะตั ะฟะพัะพะบ ัะฒัะทะฐะฝะฝัั ัะพะพะฑัะตะฝะธะน ะธ ะพะฑัะตะดะธะฝัะตั ะธั ะฒ ะพะดะฝะพ ะธัะพะณะพะฒะพะต ัะพะพะฑัะตะฝะธะต. ะญัะพ ะพะดะธะฝ ะธะท ัะฐะผัั ัะปะพะถะฝัั, ะฝะพ ะผะพัะฝัั ะฟะฐััะตัะฝะพะฒ.
**ะะฐะบ ัะฐะฑะพัะฐะตั Aggregator:**
1. **Correlation:** ะัะต ัะพะพะฑัะตะฝะธั, ะพัะฝะพัััะธะตัั ะบ ะพะดะฝะพะน ะณััะฟะฟะต, ะดะพะปะถะฝั ะธะผะตัั ะพะฑัะธะน **Correlation ID**.
2. **Completion Strategy:** ะะณัะตะณะฐัะพั ะดะพะปะถะตะฝ ะทะฝะฐัั, ะบะพะณะดะฐ ะณััะฟะฟะฐ ัะพะพะฑัะตะฝะธะน ััะธัะฐะตััั ะฟะพะปะฝะพะน. ะะฑััะฝะพ ะดะปั ััะพะณะพ ะธัะฟะพะปัะทัะตััั ััะตััะธะบ ะพะถะธะดะฐะตะผัั ัะพะพะฑัะตะฝะธะน.
3. **Aggregation Store:** ะะตะพะฑัะพะดะธะผะพ ะฒัะตะผะตะฝะฝะพะต ััะฐะฝะธะปะธัะต ะดะปั ะฝะฐะบะพะฟะปะตะฝะธั ัะพะพะฑัะตะฝะธะน ะดะพ ะทะฐะฒะตััะตะฝะธั ะณััะฟะฟั.
4. **Timeout:** ะงัะพะฑั ัะธััะตะผะฐ ะฝะต ะถะดะฐะปะฐ ะฒะตัะฝะพ ะฟะพัะตััะฝะฝัะต ัะพะพะฑัะตะฝะธั, ะธัะฟะพะปัะทัะตััั ัะฐะนะผะฐัั. ะัะปะธ ะทะฐ ะพัะฒะตะดะตะฝะฝะพะต ะฒัะตะผั ะณััะฟะฟะฐ ะฝะต ัะพะฑัะฐะปะฐัั, ะพะฝะฐ ะพะฑัะฐะฑะฐััะฒะฐะตััั ะบะฐะบ ะตััั (ะฒะพะทะผะพะถะฝะพ, ั ะพัะธะฑะบะพะน).

---

## ะะฑะทะพั ะฟัะพะตะบัะฐ
### ะััะธัะตะบัััะฐ ัะธััะตะผั
ะกะธััะตะผะฐ ัะพััะพะธั ะธะท 4 ะฝะตะทะฐะฒะธัะธะผัั ะผะธะบัะพัะตัะฒะธัะพะฒ, ะฒะทะฐะธะผะพะดะตะนััะฒัััะธั ัะตัะตะท ะฑัะพะบะตั ัะพะพะฑัะตะฝะธะน RabbitMQ.
```
โโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโโ
โ   Frontend  โโโโโโโถโ  API Service โโโโโโโถโ   RabbitMQ    โ
โโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ      โโโโโโโโโฌโโโโโโโโ
                                                    โ
                                    โโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโ
                                    โ                               โ
                            โโโโโโโโโผโโโโโโโโโ            โโโโโโโโโโผโโโโโโโโโโ
                            โ    Consumer    โ            โ    Aggregator    โ
                            โ    Service     โ            โ     Service      โ
                            โโโโโโโโโโโโโโโโโโ            โโโโโโโโโโโโโโโโโโโโ
                                    โ                               โ
                                    โผ                               โผ
                            OpenWeatherMap API          ะะณัะตะณะฐัะธั ัะตะทัะปััะฐัะพะฒ
```

```mermaid
graph TD
    subgraph ะกะธััะตะผะฐ ะฐะณัะตะณะฐัะธะธ ะฟะพะณะพะดั
        Frontend -- 1. HTTP Request --> API_Service
        API_Service -- 2. Messages --> RabbitMQ
        RabbitMQ -- 3. Messages --> Consumer_Service
        Consumer_Service -- 4. HTTP Request --> OpenWeatherMap
        OpenWeatherMap -- 5. HTTP Response --> Consumer_Service
        Consumer_Service -- 6. Messages --> RabbitMQ
        RabbitMQ -- 7. Messages --> Aggregator_Service
        Aggregator_Service -- 8. Message --> RabbitMQ
        RabbitMQ -- 9. Message --> API_Service
        API_Service -- 10. HTTP Response --> Frontend
    end

    subgraph ะะฝะตัะฝะธะต ัะธััะตะผั
        OpenWeatherMap
    end

    style Frontend fill:#f9f,stroke:#333,stroke-width:2px
    style API_Service fill:#ccf,stroke:#333,stroke-width:2px
    style Consumer_Service fill:#cfc,stroke:#333,stroke-width:2px
    style Aggregator_Service fill:#ffc,stroke:#333,stroke-width:2px
    style RabbitMQ fill:#f96,stroke:#333,stroke-width:2px
```

**ะะพัะพะบ ะดะฐะฝะฝัั:**
1.  **Frontend** ะพัะฟัะฐะฒะปัะตั HTTP POST-ะทะฐะฟัะพั ัะพ ัะฟะธัะบะพะผ ะณะพัะพะดะพะฒ ะฝะฐ **Weather API Service**.
2.  **API Service** ะณะตะฝะตัะธััะตั `correlationId`, ัะฐะทะฑะธะฒะฐะตั ะทะฐะฟัะพั ะฝะฐ ะพัะดะตะปัะฝัะต ัะพะพะฑัะตะฝะธั (ะฟะพ ะพะดะฝะพะผั ะฝะฐ ะณะพัะพะด) ะธ ะพัะฟัะฐะฒะปัะตั ะธั ะฒ ะพัะตัะตะดั `weather.request.queue` ะฒ **RabbitMQ**.
3.  **Weather Consumer Service** ะฟะพะปััะฐะตั ัะพะพะฑัะตะฝะธั ะธะท ััะพะน ะพัะตัะตะดะธ.
4.  ะะปั ะบะฐะถะดะพะณะพ ัะพะพะฑัะตะฝะธั **Consumer Service** ะดะตะปะฐะตั HTTP-ะทะฐะฟัะพั ะบ ะฒะฝะตัะฝะตะผั **OpenWeatherMap API**.
5.  ะะพะปััะธะฒ ะพัะฒะตั, **Consumer Service** ัะพัะผะธััะตั ัะพะพะฑัะตะฝะธะต-ะพัะฒะตั ะธ ะพัะฟัะฐะฒะปัะตั ะตะณะพ ะฒ ะพัะตัะตะดั `weather.response.queue`.
6.  **Weather Aggregator Service** ัะปััะฐะตั ะพัะตัะตะดั ะพัะฒะตัะพะฒ, ะฝะฐะบะฐะฟะปะธะฒะฐั ะธั ะฒ ัะฒะพะตะผ ััะฐะฝะธะปะธัะต ะธ ะณััะฟะฟะธััั ะฟะพ `correlationId`.
7.  ะะพะณะดะฐ ะฒัะต ะพัะฒะตัั ะดะปั ะพะดะฝะพะณะพ ะทะฐะฟัะพัะฐ ัะพะฑัะฐะฝั (ััะตััะธะบ ะฟะพะปััะตะฝะฝัั ัะพะพะฑัะตะฝะธะน ัะฐะฒะตะฝ ะพะฑัะตะผั ัะธัะปั ะณะพัะพะดะพะฒ), **Aggregator Service** ัะพัะผะธััะตั ะตะดะธะฝัะน ะพััะตั.
8.  ะญัะพั ะพััะตั ะพัะฟัะฐะฒะปัะตััั ะฒ ะพัะตัะตะดั `weather.aggregated.queue`.
9.  **API Service** ัะปััะฐะตั ััั ะพัะตัะตะดั, ะฟะพะปััะฐะตั ะณะพัะพะฒัะน ะพััะตั ะธ, ะฝะฐะบะพะฝะตั, ะพัะฟัะฐะฒะปัะตั ะตะณะพ ะฒ ะฒะธะดะต HTTP-ะพัะฒะตัะฐ ะฝะฐ **Frontend**.

---

java -version
```
java version "23.0.1" 2024-10-15
Java(TM) SE Runtime Environment (build 23.0.1+11-39)
Java HotSpot(TM) 64-Bit Server VM (build 23.0.1+11-39, mixed mode, sharing)
```

mvn -version
```
Apache Maven 3.9.9 (8e8579a9e76f7d015ee5ec7bfcdc97d260186937)
Maven home: C:\home\app\maven\apache-maven-3.9.9
Java version: 23.0.1, vendor: Oracle Corporation, runtime: C:\Program Files\Java\jdk-23
Default locale: ru_RU, platform encoding: UTF-8
OS name: "windows 11", version: "10.0", arch: "amd64", family: "windows"
```

docker --version
```
Docker version 27.4.0, build bde2b89
```
## ะะฐะทะพะฒะฐั ัะตะฐะปะธะทะฐัะธั
### ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั
#### Weather API Service (ะฟะพัั 8080)

- REST API endpoint: POST /api/weather/forecast
- ะะตะฝะตัะฐัะธั Correlation ID ะดะปั ัะฒัะทะธ ัะพะพะฑัะตะฝะธะน
- ะะตะฐะปะธะทะฐัะธั ะฟะฐััะตัะฝะฐ Message Router
- ะัะธะฝััะพะฝะฝะพะต ะพะถะธะดะฐะฝะธะต ัะตะทัะปััะฐัะฐ ัะตัะตะท CompletableFuture

```
javapublic AggregatedWeatherReport processWeatherRequest(WeatherRequestDto requestDto) {
    String correlationId = UUID.randomUUID().toString();
    CompletableFuture<AggregatedWeatherReport> future = new CompletableFuture<>();
    pendingRequests.put(correlationId, future);
    
    // ะัะฟัะฐะฒะบะฐ ัะพะพะฑัะตะฝะธั ะดะปั ะบะฐะถะดะพะณะพ ะณะพัะพะดะฐ
    for (String city : requestDto.getCities()) {
        WeatherMessage message = new WeatherMessage(correlationId, city, totalCities, ...);
        rabbitTemplate.convertAndSend(exchangeName, requestRoutingKey, message);
    }
    
    return future.get(60, TimeUnit.SECONDS);
}
```

#### Weather Consumer Service (ะฟะพัั 8081)

- ะะพะปััะตะฝะธะต ัะพะพะฑัะตะฝะธะน ะธะท ะพัะตัะตะดะธ weather.request.queue
- ะัะทะพะฒ OpenWeatherMap API
- Manual acknowledgment ะดะปั ะบะพะฝััะพะปั ะพะฑัะฐะฑะพัะบะธ
- Rate limiting: 1 ะทะฐะฟัะพั/ัะตะบัะฝะดั

ะะพะฝัะธะณััะฐัะธั:
```
yamlspring:
  rabbitmq:
    listener:
      simple:
        concurrency: 5          # 5 ะฟะฐัะฐะปะปะตะปัะฝัั ะฟะพัะพะบะพะฒ
        max-concurrency: 10
        acknowledge-mode: manual
```

#### Weather Aggregator Service (ะฟะพัั 8082)

- ะะตะฐะปะธะทะฐัะธั ะฟะฐััะตัะฝะฐ Aggregator
- ะกะฑะพั ะพัะฒะตัะพะฒ ะฟะพ Correlation ID
- Completion Strategy: receivedCount >= totalCities
- Timeout-based cleanup: ัะดะฐะปะตะฝะธะต ัััะฐัะตะฒัะธั ะบะพะฝัะตะบััะพะฒ

ะะปััะตะฒะพะน ะผะตัะฐะฝะธะทะผ:
```
javasynchronized (context) {
    context.addResponse(response);
    if (context.isComplete()) {
        AggregatedWeatherReport report = context.buildReport();
        rabbitTemplate.convertAndSend(exchangeName, aggregatedRoutingKey, report);
        aggregationStore.remove(correlationId);
    }
}
```

### ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ
ะัะตัะตะดะธ RabbitMQ:

- weather.request.queue - ะทะฐะฟัะพัั ะฝะฐ ะฟะพะปััะตะฝะธะต ะฟะพะณะพะดั
- weather.response.queue - ะพัะฒะตัั ะพั Consumer
- weather.aggregated.queue - ะฐะณัะตะณะธัะพะฒะฐะฝะฝัะต ัะตะทัะปััะฐัั
- weather.request.dlq - Dead Letter Queue

#### ะะตัะตะฝะฝัะต ะฟัะพะฑะปะตะผั:

- ะกะตัะธะฐะปะธะทะฐัะธั LocalDateTime - ะดะพะฑะฐะฒะปะตะฝ ะผะพะดัะปั jackson-datatype-jsr310
- ะะพะฝัะธะณััะฐัะธั ะพัะตัะตะดะตะน - ัะตัะตะฝ ะบะพะฝัะปะธะบั ะฟะฐัะฐะผะตััะพะฒ DLX
- Manual acknowledgment - ะบะพััะตะบัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ basicAck/basicNack


---

## ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะทะฐะดะฐะฝะธั
### ะะฐะดะฐะฝะธะต 1: ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ะธ Dead Letter Queue (DLQ)
ะะตะฐะปะธะทะฐัะธั:
```
java@Bean
public Queue requestQueue() {
    Map<String, Object> args = new HashMap<>();
    args.put("x-dead-letter-exchange", exchangeName);
    args.put("x-dead-letter-routing-key", "weather.request.dlq");
    return QueueBuilder.durable(requestQueueName).withArguments(args).build();
}
DLQ Listener:
java@RabbitListener(queues = "weather.request.dlq")
public void handleDeadLetter(WeatherMessage weatherMessage) {
    log.error("=== DEAD LETTER MESSAGE RECEIVED ===");
    log.error("City: {}", weatherMessage.getCity());
    // ะะพะทะผะพะถะฝะฐ ะดะฐะปัะฝะตะนัะฐั ะพะฑัะฐะฑะพัะบะฐ: ัะพััะฐะฝะตะฝะธะต ะฒ ะะ, ัะฒะตะดะพะผะปะตะฝะธะต
}
```

ะะตะทัะปััะฐั:

- ะัะพะฑะปะตะผะฝัะต ัะพะพะฑัะตะฝะธั ะธะทะพะปะธัััััั ะฒ DLQ
- ะัะตะดะพัะฒัะฐัะตะฝะธะต ะฑะตัะบะพะฝะตัะฝัั ัะธะบะปะพะฒ ะพะฑัะฐะฑะพัะบะธ
- ะะพะทะผะพะถะฝะพััั ะฐะฝะฐะปะธะทะฐ ะพัะธะฑะพะบ ะฟะพัััะฐะบััะผ


---

### ะะฐะดะฐะฝะธะต 2: ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต Consumerโะฐ
ะะพะฝัะธะณััะฐัะธั:
```
yamlspring:
  rabbitmq:
    listener:
      simple:
        concurrency: 5
        max-concurrency: 10
        prefetch: 5
```

#### ะะตะทัะปััะฐัั ัะตััะธัะพะฒะฐะฝะธั:

| ะะฐัะฐะผะตัั | ะะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั | ะะพัะปะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั |
|----------|-------------------|----------------------|
| ะะพัะพะบะพะฒ ะพะฑัะฐะฑะพัะบะธ | 1 | 5 |
| ะัะตะผั ะพะฑัะฐะฑะพัะบะธ 10 ะณะพัะพะดะพะฒ | ~10 ัะตะบัะฝะด | ~2 ัะตะบัะฝะดั |

**ะะพะณะธ ะฟะพะดัะฒะตัะถะดะฐัั ะฟะฐัะฐะปะปะตะปัะฝัั ะพะฑัะฐะฑะพัะบั:**
```
INFO : Received weather request for city: London
INFO : Received weather request for city: Paris
INFO : Received weather request for city: Moscow
INFO : Received weather request for city: Tokyo
INFO : Received weather request for city: New York
```

---

### ะะฐะดะฐะฝะธะต 3: ะะฝะตะดัะตะฝะธะต ะบััะธัะพะฒะฐะฝะธั
ะขะตัะฝะพะปะพะณะธะธ:

Spring Boot Cache + Caffeine Cache
TTL: 5 ะผะธะฝัั
ะกะธะฝััะพะฝะธะทะฐัะธั ะฟะฐัะฐะปะปะตะปัะฝัั ะทะฐะฟัะพัะพะฒ: sync=true

ะะพะฝัะธะณััะฐัะธั:
```
java@Cacheable(value = "weather", key = "#city", sync = true)
public OpenWeatherMapResponse getWeatherForCity(String city) {
    rateLimiter.acquire();
    log.info("๐ CACHE MISS - Fetching from API for: {}", city);
    // ... HTTP ะทะฐะฟัะพั ะบ API
}
```

#### ะะตะทัะปััะฐัั ัะตััะธัะพะฒะฐะฝะธั:

**ะะฐะฟัะพั:** `London, Paris, London, Moscow, Paris, London`

**ะะพะณะธ:**
```
๐ CACHE MISS - Fetching weather data from API for city: London
โ Successfully fetched and CACHED weather for city: London

๐ CACHE MISS - Fetching weather data from API for city: Paris
โ Successfully fetched and CACHED weather for city: Paris

(London ะฒัะพัะพะน ัะฐะท - ะะะ "CACHE MISS" - ะธะท ะบััะฐ)

๐ CACHE MISS - Fetching weather data from API for city: Moscow
โ Successfully fetched and CACHED weather for city: Moscow

(Paris ะฒัะพัะพะน ัะฐะท - ะะะ "CACHE MISS" - ะธะท ะบััะฐ!
(London ััะตัะธะน ัะฐะท - ะะะ "CACHE MISS" - ะธะท ะบััะฐ)
```

#### ะัะธัะธัะตัะบะพะต ัะตัะตะฝะธะต: `sync=true`

**ะัะพะฑะปะตะผะฐ:** ะัะธ ะฟะฐัะฐะปะปะตะปัะฝะพะน ะพะฑัะฐะฑะพัะบะต ะฝะตัะบะพะปัะบะพ ะฟะพัะพะบะพะฒ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ะทะฐะฟัะฐัะธะฒะฐะปะธ ะพะดะธะฝ ะณะพัะพะด, ัะพะทะดะฐะฒะฐั ะดัะฑะปะธะบะฐัั HTTP-ะทะฐะฟัะพัะพะฒ.

**ะะตัะตะฝะธะต:** `sync=true` ัะธะฝััะพะฝะธะทะธััะตั ะดะพัััะฟ ะบ ะบััั ะฟะพ ะบะปััั:
```
ะะพัะพะบ 1: London โ ะะปะพะบะธััะตั ะบะปัั โ HTTP ะทะฐะฟัะพั โ ะััะธััะตั โ ะะฐะทะฑะปะพะบะธััะตั
ะะพัะพะบ 2: London โ ะะดัั ะฑะปะพะบะธัะพะฒะบั โ ะะพะปััะฐะตั ะธะท ะบััะฐ โ
ะะพัะพะบ 3: London โ ะะพะปััะฐะตั ะธะท ะบััะฐ โ
```

---

### ะะฐะดะฐะฝะธะต 4: ะฃะปัััะตะฝะฝะฐั ัััะฐัะตะณะธั ะทะฐะฒะตััะตะฝะธั ะดะปั Aggregatorโะฐ

ะัะพะฑะปะตะผะฐ:

ะัะปะธ ะพะดะฝะพ ะธะท ัะพะพะฑัะตะฝะธะน ัะตััะตััั, ะฐะณัะตะณะฐัะพั ะฑะตัะบะพะฝะตัะฝะพ ะถะดะฐะป. cleanupExpiredAggregations ะฟัะพััะพ ัะดะฐะปัะป ะบะพะฝัะตะบัั ะฑะตะท ะพัะฟัะฐะฒะบะธ ัะตะทัะปััะฐัะฐ.

ะะตัะตะฝะธะต:

ะะฑะฝะพะฒะปะตะฝะฝัะน DTO:
```
javapublic class AggregatedWeatherReport {
    private String correlationId;
    private int totalCities;
    private List<WeatherData> reports;
    private boolean partial;           // ะะะะะ
    private String partialReason;      // ะะะะะ
    // ...
}
```
ะะพะณะธะบะฐ ะพัะฟัะฐะฒะบะธ ัะฐััะธัะฝัั ัะตะทัะปััะฐัะพะฒ:
```
java@Scheduled(fixedDelay = 30000)
public void cleanupExpiredAggregations() {
    aggregationStore.forEach((correlationId, context) -> {
        if (secondsElapsed > timeoutSeconds) {
            String partialReason = String.format(
                "Timeout after %ds: received only %d/%d responses. %d responses missing.",
                timeoutSeconds, context.receivedCount, context.totalCities, missingResponses
            );
            
            AggregatedWeatherReport partialReport = context.buildReport(true, partialReason);
            rabbitTemplate.convertAndSend(exchangeName, aggregatedRoutingKey, partialReport);
            
            aggregationStore.remove(correlationId);
        }
    });
}
```
ะะฑะฝะพะฒะปะตะฝะฝัะน ััะพะฝัะตะฝะด:
ะัะพะฑัะฐะถะตะฝะธะต ะฟัะตะดัะฟัะตะถะดะตะฝะธั:
```
javascriptif (report.partial) {
    const warningDiv = document.createElement('div');
    warningDiv.classList.add('partial-warning');
    warningDiv.innerHTML = `
        <strong>โ๏ธ ะัะตะดัะฟัะตะถะดะตะฝะธะต: ะงะฐััะธัะฝัะน ัะตะทัะปััะฐั</strong>
        <p>${report.partialReason}</p>
    `;
    resultsSection.insertBefore(warningDiv, summaryInfoDiv);
}
```
ะะตะนะดะถ ััะฐัััะฐ:
```
javascriptconst statusBadge = report.partial 
    ? 'โ๏ธ ะงะฐััะธัะฝัะน ัะตะทัะปััะฐั' 
    : 'โ ะะพะปะฝัะน ัะตะทัะปััะฐั';
```
<img width="1125" height="782" alt="image" src="https://github.com/user-attachments/assets/857e0819-6b7b-40cf-a9bc-b8fc60e533f0" />

![Uploading image.pngโฆ]()


---

### ะะฐะดะฐะฝะธะต 5 (ะกะปะพะถะฝะพะต): ะะตัะตัะพะด ะฝะฐ WebSockets ะดะปั Real-time ะพะฑะฝะพะฒะปะตะฝะธะน

ะัะพะฑะปะตะผะฐ

ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะปะฐััะธัะตัะบะพะณะพ HTTP Request-Reply ะดะปั ะฐัะธะฝััะพะฝะฝะพะน ะฐะณัะตะณะฐัะธะธ ัะพะทะดะฐะตั ะฟะปะพัะพะน ะฟะพะปัะทะพะฒะฐัะตะปััะบะธะน ะพะฟัั (UX), ะทะฐััะฐะฒะปัั ะบะปะธะตะฝัะฐ ะดะพะปะณะพ ะถะดะฐัั ะฟะพะปะฝะพะณะพ ะพัะฒะตัะฐ.

ะฆะตะปั

ะะฝะตะดัะธัั WebSockets ะดะปั ะพะฑะตัะฟะตัะตะฝะธั ะฟะพััะพัะฝะฝะพะณะพ ะดะฒัะฝะฐะฟัะฐะฒะปะตะฝะฝะพะณะพ ัะพะตะดะธะฝะตะฝะธั ะผะตะถะดั ะบะปะธะตะฝัะพะผ ะธ weather-api-service, ะฟะพะทะฒะพะปัั ะพัะฟัะฐะฒะปััั Real-time ะพะฑะฝะพะฒะปะตะฝะธั ัะตะทัะปััะฐัะพะฒ ะฟะพ ะผะตัะต ะธั ะณะพัะพะฒะฝะพััะธ.

ะะตะฐะปะธะทะฐัะธั (ะะฑะทะพั)

**Backend (weather-api-service) ะะดะฐะฟัะฐัะธั:**

- ะะพะฑะฐะฒะปะตะฝ spring-boot-starter-websocket.

- ะกะพะทะดะฐะฝ WebSocket-ัะตะฝะดะปะตั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะบะปะธะตะฝััะบะธะผะธ ัะตััะธัะผะธ.

- ะกะตัะฒะธั ะฑะพะปััะต ะฝะต ะธัะฟะพะปัะทัะตั CompletableFuture, ะฐ ััะฐะฝะธั WebSocketSession ะบะปะธะตะฝัะฐ, ัะฒัะทะฐะฝะฝัะน ั correlationId.

- ะัะธ ะฟะพะปััะตะฝะธะธ ัะพะพะฑัะตะฝะธั ะธะท weather.aggregated.queue, API Service ะธัะตั ัะพะพัะฒะตัััะฒััััั ะฐะบัะธะฒะฝัั ัะตััะธั ะธ ะพัะฟัะฐะฒะปัะตั ะตะน JSON-ะพะฑะฝะพะฒะปะตะฝะธะต.

**Frontend (weather-frontend) ะะดะฐะฟัะฐัะธั:**

- ะะฐะผะตะฝะตะฝ fetch ะฝะฐ new WebSocket("ws://localhost:8080/ws/weather").

- ะะพะณะธะบะฐ socket.onmessage ะฝะฐัััะพะตะฝะฐ ะฝะฐ ะฟะพะปััะตะฝะธะต ะฟะพัะพะบะฐ ะดะฐะฝะฝัั (ัะพะพะฑัะตะฝะธะน) ะธ ะดะธะฝะฐะผะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต UI.

- ะะตะฐะปะธะทะพะฒะฐะฝั ััะฝะบัะธะธ ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั ะพะฑัะตะณะพ ะฟัะพะณัะตััะฐ, ะพัะพะฑัะฐะถะตะฝะธั ััะฐัััะฐ ะบะฐะถะดะพะณะพ ะณะพัะพะดะฐ ะธ ะฒัะฒะพะดะฐ ัะธะฝะฐะปัะฝะพะณะพ/ัะฐััะธัะฝะพะณะพ ะพััะตัะฐ.

ะะตะทัะปััะฐัั

<img width="1266" height="908" alt="image" src="https://github.com/user-attachments/assets/fb165edf-adc6-4728-931f-ee2917d0025a" />

---


<img width="1076" height="334" alt="image" src="https://github.com/user-attachments/assets/a6ea1edf-3d91-431f-b914-911cd6c65e94" />

---

1. ะะฐะฟัะพั 5 ะณะพัะพะดะพะฒ

ะะฑะฝะพะฒะปะตะฝะธั ะฟะพัะฒะปััััั ัะตัะตะท ~1 ัะตะบัะฝะดั ะฟะพัะปะต ะฝะฐัะฐะปะฐ ะพะฑัะฐะฑะพัะบะธ.

ะะธะฝะฐะผะธัะตัะบะพะต ะพัะพะฑัะฐะถะตะฝะธะต: ะะฐะถะดัะน ะณะพัะพะด ะฟะพัะฒะปัะตััั ะฒ ัะฐะฑะปะธัะต ะฟะพ ะผะตัะต ะตะณะพ ะพะฑัะฐะฑะพัะบะธ Consumer'ะพะผ ะธ ะพัะฟัะฐะฒะบะธ ัะตัะตะท WebSocket.

---

2. ะะปะธัะตะปัะฝัะน ะทะฐะฟัะพั (20 ะณะพัะพะดะพะฒ)

ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ะฟะพััะพัะฝะฝัะน ะฟัะพะณัะตัั, ะฐ ะฝะต ะทะฐะฒะธััะธะน ะธะฝะดะธะบะฐัะพั.

ะฃะปัััะตะฝะฝัะน UX: ะัะพะณัะตัั-ะฑะฐั ะธ ััะตััะธะบ ะพะฑะฝะพะฒะปััััั ะฟะปะฐะฒะฝะพ (ะฝะฐะฟัะธะผะตั, 5% โ 10% โ 15%...).

ะะปััะตะฒะพะน ัััะตะบั: ะก WebSockets ัะตะฐะปะธะทะพะฒะฐะฝ ะฟะฐััะตัะฝ Real-time Publishing, ััะพ ััััะฐะฝะธะปะพ ะฟัะพะฑะปะตะผั "ะฑัััะปะพัะฝะพะณะพ ะณะพัะปััะบะฐ" ะฒ ะพะฑัะฐัะฝะพะผ ะฟััะธ (ะพั Aggregator ะบ Frontend) ะธ ะทะฝะฐัะธัะตะปัะฝะพ ัะปัััะธะปะพ ะฟะพะปัะทะพะฒะฐัะตะปััะบะธะน ะพะฟัั.

---

### ะฃะปัััะตะฝะฝัะน ััะพะฝัะตะฝะด

#### ะะพะฒัะน ะดะธะทะฐะนะฝ:

**ะขะตัะฝะพะปะพะณะธะธ:**
- Tailwind CSS ะดะปั ัะพะฒัะตะผะตะฝะฝะพะณะพ UI
- ะัะธะฝััะพะฝะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ะฑะตะท ะฟะตัะตะทะฐะณััะทะบะธ ัััะฐะฝะธัั

**ะะปััะตะฒัะต ะฒะพะทะผะพะถะฝะพััะธ:**

1. **ะงะฐััะธัะฝัะน ะฒัะฒะพะด ัะตะทัะปััะฐัะพะฒ:**
   - ะะตะทัะปััะฐัั ะฟะพัะฒะปััััั ะฟะพ ะผะตัะต ะณะพัะพะฒะฝะพััะธ
   - ะัะพะณัะตัั-ะฑะฐั ะฟะพะบะฐะทัะฒะฐะตั ะฟัะพัะตะฝั ะทะฐะฒะตััะตะฝะธั
   - ะกัะฐััั ะบะฐะถะดะพะณะพ ะณะพัะพะดะฐ ะพะฑะฝะพะฒะปัะตััั ะดะธะฝะฐะผะธัะตัะบะธ

2. **ะะธะทัะฐะปัะฝะฐั ะธะฝะดะธะบะฐัะธั:**
```
   โ London: 9.46ยฐC, Broken clouds     [ะฃัะฟะตัะฝะพ]
   โ Paris: 2.73ยฐC, Mist                [ะฃัะฟะตัะฝะพ]
   โ New York: 404 Not Found            [ะัะธะฑะบะฐ]
   โณ Tokyo: ะะฑัะฐะฑะฐััะฒะฐะตััั...           [ะะถะธะดะฐะฝะธะต]
```

3. **ะัะพะณัะตัั-ะฑะฐั:**
```
   ะัะพะณัะตัั: 3 ะธะท 5                     60%
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ะัะธะผะตั ะธะฝัะตััะตะนัะฐ:
html<div class="bg-gray-800 p-6 rounded-2xl">
    <div class="flex justify-between items-center mb-4">
        <h2>ะกัะฐััั ะะฐะดะฐัะธ <span class="text-blue-400">ID: corr-123</span></h2>
        <div class="px-3 py-1 bg-yellow-800 text-yellow-300 rounded-full">
            ะ ะฟัะพัะตััะต
        </div>
    </div>
    
    <div class="progress-bar">
        <div style="width: 60%" class="bg-blue-500 transition-all duration-700">
        </div>
    </div>
    
    <!-- ะะฐััะพัะบะธ ัะตะทัะปััะฐัะพะฒ -->
</div>
```

---

## ะัะฒะพะดั

โ **ะฃัะฟะตัะฝะพ ัะตะฐะปะธะทะพะฒะฐะฝั:**
1. ะะฐะทะพะฒะฐั ะผะธะบัะพัะตัะฒะธัะฝะฐั ะฐััะธัะตะบัััะฐ ั RabbitMQ
2. Dead Letter Queue ะดะปั ะธะทะพะปััะธะธ ะฟัะพะฑะปะตะผะฝัั ัะพะพะฑัะตะฝะธะน
3. ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต Consumer (5 ะฟะฐัะฐะปะปะตะปัะฝัั ะฟะพัะพะบะพะฒ)
4. ะััะธัะพะฒะฐะฝะธะต ั ัะธะฝััะพะฝะธะทะฐัะธะตะน (`sync=true`)
5. ะงะฐััะธัะฝัะต ัะตะทัะปััะฐัั ะฟัะธ ัะฐะนะผะฐััะต Aggregator
6. Real-time ะพะฑะฝะพะฒะปะตะฝะธั ัะตัะตะท WebSockets
7. ะกะพะฒัะตะผะตะฝะฝัะน responsive ััะพะฝัะตะฝะด ั ัะฐััะธัะฝัะผ ะฒัะฒะพะดะพะผ

โ **ะะตะฐะปะธะทะพะฒะฐะฝะฝัะต ะฟะฐััะตัะฝั EIP:**
- Message Channel
- Message Router
- Request-Reply
- Aggregator
- Dead Letter Queue
- Real-time Publisher (ะฝะฐ ะฑะฐะทะต WebSockets)

---

## ะัะธะปะพะถะตะฝะธั

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
```
weather-aggregator-system/
โโโ weather-api-service/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย# Backend REST API (Producer)
โ   โโโ src/main/java/com/weather/api/
โ   โ   โโโ config/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย # ะะพะฝัะธะณััะฐัะธั ะฑัะพะบะตัะฐ ะธ ัะพะบะตัะพะฒ
โ   โ   โ โโโ **RabbitMQConfig.java** ย ย ย ย ย ย ย ย# ะะฐัััะพะนะบะฐ ะพัะตัะตะดะตะน ะดะปั ะทะฐะฟัะพัะพะฒ
โ   โ   โ โโโ **WebSocketConfig.java** ย ย ย ย ย ย ย# ะะฐัััะพะนะบะฐ WebSocket-ัะตัะฒะตัะฐ (ะดะปั ะพัะฒะตัะพะฒ)
โ   โ   โโโ controller/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย # ะะฑัะฐะฑะพัะบะฐ ะฒัะพะดััะธั REST-ะทะฐะฟัะพัะพะฒ
โ   โ   โ โโโ **WeatherController.java** ย ย ย ย ย ย# ะัะธะฝะธะผะฐะตั ะทะฐะฟัะพั ะพั Frontend, ะพัะฟัะฐะฒะปัะตั ะฒ RabbitMQ
โ   โ   โโโ dto/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# ะะฑัะตะบัั ะฟะตัะตะดะฐัะธ ะดะฐะฝะฝัั
โ   โ   โ โโโ **AggregatedWeatherReport.java** ย ย# ะคะธะฝะฐะปัะฝัะน ะฐะณัะตะณะธัะพะฒะฐะฝะฝัะน ะพััะตั (ะดะปั ะพัะฟัะฐะฒะบะธ ะฝะฐ Frontend)
โ   โ   โ โโโ **WeatherData.java** ย ย ย ย ย ย ย ย ย# ะัะพะผะตะถััะพัะฝัะต ะดะฐะฝะฝัะต ะพ ะฟะพะณะพะดะต
โ   โ   โ โโโ **WeatherMessage.java** ย ย ย ย ย ย ย # ะกะพะพะฑัะตะฝะธะต, ะพัะฟัะฐะฒะปัะตะผะพะต ะฒ ะพัะตัะตะดั
โ   โ   โ โโโ **WeatherRequestDto.java** ย ย ย ย ย ย# DTO ะดะปั ะฒัะพะดััะตะณะพ REST-ะทะฐะฟัะพัะฐ (ะฝะฐะฟัะธะผะตั, ะณะพัะพะด)
โ   โ   โโโ service/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ   โ   โ โโโ **WeatherService.java** ย ย ย ย ย ย ย # ะะพะณะธะบะฐ ะพัะฟัะฐะฒะบะธ ะทะฐะฟัะพัะฐ ะฒ ะพัะตัะตะดั ะธ ัะฐะฑะพัั ั WebSockets
โ   โโโ **pom.xml** ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# Maven-ะทะฐะฒะธัะธะผะพััะธ (Web, RabbitMQ, WebSocket)
โ   โโโ **WeatherApiApplication.java** ย ย ย ย ย ย ย# ะขะพัะบะฐ ะฒัะพะดะฐ ะฒ API-ัะตัะฒะธั
โ
โโโ weather-consumer-service/ ย ย ย ย ย ย ย ย ย ย ย# Consumer ะดะปั ะฒัะทะพะฒะฐ Weather API
โ   โโโ src/main/java/com/weather/consumer/
โ   โ   โโโ client/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย # HTTP ะบะปะธะตะฝั ะดะปั ะฒะฝะตัะฝะธั API
โ   โ   โ โโโ **WeatherApiClient.java** ย ย ย ย ย ย ย # ะัะทะพะฒ ััะพัะพะฝะฝะธั ะฟะพะณะพะดะฝัั API (ะฝะฐะฟัะธะผะตั, OpenWeatherMap)
โ   โ   โโโ config/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย # ะะพะฝัะธะณััะฐัะธั
โ   โ   โ โโโ **RabbitMQConfig.java** ย ย ย ย ย ย ย ย# ะะฐัััะพะนะบะฐ ะพัะตัะตะดะธ ะดะปั ะฒัะพะดััะธั ะทะฐะฟัะพัะพะฒ
โ   โ   โ โโโ **CacheConfig.java** ย ย ย ย ย ย ย ย ย# ะะฐัััะพะนะบะฐ ะบััะธัะพะฒะฐะฝะธั (ะฝะฐะฟัะธะผะตั, Redis ะธะปะธ Caffeine)
โ   โ   โโโ dto/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# Data Transfer Objects
โ   โ   โ โโโ **OpenWeatherMapResponse.java** ย ย ย # DTO ะดะปั ะพัะฒะตัะฐ ะพั ะฒะฝะตัะฝะตะณะพ API
โ   โ   โ โโโ **WeatherMessage.java** ย ย ย ย ย ย ย # ะัะพะดััะตะต ัะพะพะฑัะตะฝะธะต ะธะท ะพัะตัะตะดะธ (ะทะฐะฟัะพั)
โ   โ   โ โโโ **WeatherResponse.java** ย ย ย ย ย ย ย# ะกัััะบัััะฐ ะดะฐะฝะฝัั ะดะปั ะพัะฒะตัะฐ, ะพัะฟัะฐะฒะปัะตะผะพะณะพ ะฐะณัะตะณะฐัะพัั
โ   โ   โโโ service/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# ะะฑัะฐะฑะพัะบะฐ ัะพะพะฑัะตะฝะธะน
โ   โ   โ โโโ **DeadLetterQueueService.java** ย ย # ะะพะณะธะบะฐ ะดะปั ะพะฑัะฐะฑะพัะบะธ ะพัะธะฑะพะบ (DLQ)
โ   โ   โ โโโ **WeatherConsumerService.java** ย ย ย # ะะปะฐะฒะฝัะน ัะปััะฐัะตะปั RabbitMQ, ะฒัะทัะฒะฐััะธะน API ะธ ะพัะฟัะฐะฒะปัััะธะน ัะตะทัะปััะฐั ะฐะณัะตะณะฐัะพัั
โ   โโโ **WeatherConsumerApplication.java** ย ย ย ย # ะขะพัะบะฐ ะฒัะพะดะฐ ะฒ Consumer-ัะตัะฒะธั
โ   โโโ **pom.xml** ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# Maven-ะทะฐะฒะธัะธะผะพััะธ (RabbitMQ, HTTP Client, Cache)
โ
โโโ weather-aggregator-service/ ย ย ย ย ย ย ย ย ย ย# Aggregator ะดะปั ัะฑะพัะฐ ะธ ัััะตะดะฝะตะฝะธั ัะตะทัะปััะฐัะพะฒ
โ   โโโ src/main/java/com/weather/aggregator/
โ   โ   โโโ config/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย # ะะพะฝัะธะณััะฐัะธั
โ   โ   โ โโโ **RabbitMQConfig.java** ย ย ย ย ย ย ย ย# ะะฐัััะพะนะบะฐ ะพัะตัะตะดะธ ะดะปั ะฒัะพะดััะธั ะพัะฒะตัะพะฒ ะพั Consumer
โ   โ   โโโ dto/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# Data Transfer Objects
โ   โ   โ โโโ **AggregatedWeatherReport.java** ย ย# ะคะธะฝะฐะปัะฝัะน ะฐะณัะตะณะธัะพะฒะฐะฝะฝัะน ะพััะตั
โ   โ   โ โโโ **WeatherData.java** ย ย ย ย ย ย ย ย ย# ะัะพะผะตะถััะพัะฝัะต ะดะฐะฝะฝัะต
โ   โ   โ โโโ **WeatherResponse.java** ย ย ย ย ย ย ย# ะัะฒะตั ะพั Consumer
โ   โ   โโโ service/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# ะะพะณะธะบะฐ ะฐะณัะตะณะฐัะธะธ
โ   โ   โ โโโ **WeatherAggregatorService.java** ย # ะกะปััะฐัะตะปั RabbitMQ, ัะพะฑะธัะฐััะธะน N ะพัะฒะตัะพะฒ, ะฐะณัะตะณะธััััะธะน ะธั ะธ ะพัะฟัะฐะฒะปัััะธะน ัะธะฝะฐะปัะฝัะน ะพััะตั ะพะฑัะฐัะฝะพ ะฒ Weather API (ะดะปั WebSockets)
โ   โโโ **WeatherAggregatorApplication.java** ย ย ย # ะขะพัะบะฐ ะฒัะพะดะฐ ะฒ Aggregator-ัะตัะฒะธั
โ   โโโ **pom.xml** ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# Maven-ะทะฐะฒะธัะธะผะพััะธ (RabbitMQ, Data Structures)
โ
โโโ weather-frontend/ ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# Frontend ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ **css/style.css** ย ย ย ย ย ย ย ย ย ย ย ย ย # ะกัะธะปะธ ะดะปั ะธะฝัะตััะตะนัะฐ
โ   โโโ **js/app.js** ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย # JavaScript-ะปะพะณะธะบะฐ (ะพัะฟัะฐะฒะบะฐ REST, ะฟะพะดะบะปััะตะฝะธะต WebSocket, ะพัะพะฑัะฐะถะตะฝะธะต)
โ   โโโ **index.html** ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย# ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ
โ
โโโ **docker-compose.yml** ย ย ย ย ย ย ย ย ย ย ย ย # Docker Compose

```

---
