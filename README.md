# ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° - Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ğ¾Ğ² Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ñ‹ Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Spring Boot Ğ¸ RabbitMQ
##  Ğ¦ĞµĞ»ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹

Ğ¦ĞµĞ»ÑŒÑ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¹ Ğ»Ğ°Ğ±Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ½Ğ°Ğ²Ñ‹ĞºĞ¾Ğ² Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼
Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹, Ğ±Ñ€Ğ¾ĞºĞµÑ€Ğ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ RabbitMQ Ğ¸ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² (Enterprise Integration Patterns). ĞŸĞ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ğ´ÑƒÑ‚ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
Ğ´Ğ»Ñ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ· Ğ²Ğ½ĞµÑˆĞ½ĞµĞ³Ğ¾ API.

---

Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸: Spring Boot 3.2.0, RabbitMQ 3.x, Java 17, Maven, Docker

---

Ğ’ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ (Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹) Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ¸Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸. ĞŸÑ€ÑĞ¼Ñ‹Ğµ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ñ‹ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ñ‡ĞµÑ€ĞµĞ· REST API) ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ ÑĞ¸Ğ»ÑŒĞ½ÑƒÑ ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸. Ğ•ÑĞ»Ğ¸ Ğ¾Ğ´Ğ¸Ğ½ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½, Ğ²ÑÑ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ² Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€ĞµÑ€Ğ²Ğ°Ñ‚ÑŒÑÑ. 

---

**Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ÑĞ¼Ğ¸ (Message Queuing)** Ñ€ĞµÑˆĞ°ÑÑ‚ ÑÑ‚Ñƒ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñƒ, Ğ²Ğ²Ğ¾Ğ´Ñ Ğ¿Ñ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ â€” **Ğ±Ñ€Ğ¾ĞºĞµÑ€ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹**. Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ½Ğµ Ğ¾Ğ±Ñ‰Ğ°ÑÑ‚ÑÑ Ğ´Ñ€ÑƒĞ³ Ñ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ, Ğ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ. Ğ”Ñ€ÑƒĞ³Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ½Ğ° ÑÑ‚Ğ¸ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ Ğ¸ Ğ·Ğ°Ğ±Ğ¸Ñ€Ğ°ÑÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¿Ğ¾ Ğ¼ĞµÑ€Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸. Ğ­Ñ‚Ğ¾ Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ğ²Ğ°ĞµÑ‚ **ÑĞ»Ğ°Ğ±ÑƒÑ ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ** Ğ¸ **Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ**.

---

**RabbitMQ** â€” ÑÑ‚Ğ¾ Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· ÑĞ°Ğ¼Ñ‹Ñ… Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ñ… Ğ±Ñ€Ğ¾ĞºĞµÑ€Ğ¾Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¼ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¼ ĞºĞ¾Ğ´Ğ¾Ğ¼. ĞĞ½ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ» AMQP (Advanced Message Queuing Protocol) Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ½Ğ°Ğ´ĞµĞ¶Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼ Ğ´Ğ»Ñ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹.

---

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ğ¸ RabbitMQ:**
- **Producer:** ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ.
- **Consumer:** ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ.
- **Queue:** ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ, Ğ±ÑƒÑ„ĞµÑ€ Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹.
- **Exchange:** Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ¾Ğ±Ğ¼ĞµĞ½Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¾Ñ‚ Producer Ğ¸ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¸Ñ… Ğ² Ğ¾Ğ´Ğ½Ñƒ Ğ¸Ğ»Ğ¸ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ĞµĞ¹. Ğ¢Ğ¸Ğ¿ exchange (Direct, Topic, Fanout) Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸.
- **Binding:** ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ ÑĞ²ÑĞ·Ñ‹Ğ²Ğ°ĞµÑ‚ exchange Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒÑ.

---

**Enterprise Integration Patterns (EIP)**

EIP â€” ÑÑ‚Ğ¾ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ğ½Ñ‹Ñ… Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ¾Ñ€Ğ¿Ğ¾Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹. Ğ’ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¹
Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ Ğ¼Ñ‹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞµĞ¼ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ².

---

**Message Channel**

ĞšĞ°Ğ½Ğ°Ğ» ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ â€” ÑÑ‚Ğ¾ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½, Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ÑÑÑ‰Ğ¸Ğ¹ ÑĞ¾Ğ±Ğ¾Ğ¹ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ°Ğ½Ğ°Ğ», Ğ¿Ğ¾ ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼Ñƒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¿ĞµÑ€ĞµĞ´Ğ°ÑÑ‚ÑÑ Ğ¾Ñ‚ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ° Ğº Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼Ñƒ. Ğ’ RabbitMQ Ñ€Ğ¾Ğ»ÑŒ ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸.

---

**Message Router**

ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞµĞ³Ğ¾ Ğ² Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ñ… ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹. Ğ’ Ğ½Ğ°ÑˆĞµĞ¼ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ weather-api-service Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹ÑÑ‚ÑƒĞ¿Ğ°Ñ‚ÑŒ Ğ² Ñ€Ğ¾Ğ»Ğ¸ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€Ğ°, Ñ€Ğ°Ğ·Ğ±Ğ¸Ğ²Ğ°Ñ Ğ¾Ğ´Ğ¸Ğ½
Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ°.

---

**Request-Reply**

ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ´Ğ»Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ²ÑƒÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ½ĞµĞ¹ ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¾ÑÑ‹Ğ»Ğ°ĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ-Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¸ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚
ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ-Ğ¾Ñ‚Ğ²ĞµÑ‚. Ğ’ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¼ Ğ¼Ğ¸Ñ€Ğµ ÑÑ‚Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚ÑÑ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ Ğ´Ğ²ÑƒÑ… ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ² (Ğ¾Ğ´Ğ¸Ğ½ Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ², Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ´Ğ»Ñ
Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²) Ğ¸ Correlation ID â€” ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ ĞºĞ°Ğº Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞµ, Ñ‚Ğ°Ğº Ğ¸ Ğ² Ğ¾Ñ‚Ğ²ĞµÑ‚Ğµ,
Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ ÑĞ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ñ….

---

**Aggregator**
ĞĞ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ¾Ñ€ â€” ÑÑ‚Ğ¾ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¿Ğ¾Ñ‚Ğ¾Ğº ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¸ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞµÑ‚ Ğ¸Ñ… Ğ² Ğ¾Ğ´Ğ½Ğ¾ Ğ¸Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ. Ğ­Ñ‚Ğ¾ Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· ÑĞ°Ğ¼Ñ‹Ñ… ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ…, Ğ½Ğ¾ Ğ¼Ğ¾Ñ‰Ğ½Ñ‹Ñ… Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ².
**ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Aggregator:**
1. **Correlation:** Ğ’ÑĞµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ, Ğ¾Ñ‚Ğ½Ğ¾ÑÑÑ‰Ğ¸ĞµÑÑ Ğº Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ, Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ **Correlation ID**.
2. **Completion Strategy:** ĞĞ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ¾Ñ€ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ·Ğ½Ğ°Ñ‚ÑŒ, ĞºĞ¾Ğ³Ğ´Ğ° Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹. ĞĞ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹.
3. **Aggregation Store:** ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ´Ğ»Ñ Ğ½Ğ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¸Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹.
4. **Timeout:** Ğ§Ñ‚Ğ¾Ğ±Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğµ Ğ¶Ğ´Ğ°Ğ»Ğ° Ğ²ĞµÑ‡Ğ½Ğ¾ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚. Ğ•ÑĞ»Ğ¸ Ğ·Ğ° Ğ¾Ñ‚Ğ²ĞµĞ´ĞµĞ½Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ½Ğµ ÑĞ¾Ğ±Ñ€Ğ°Ğ»Ğ°ÑÑŒ, Ğ¾Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ ĞºĞ°Ğº ĞµÑÑ‚ÑŒ (Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾, Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¾Ğ¹).

---

## ĞĞ±Ğ·Ğ¾Ñ€ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑĞ¾ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ¸Ğ· 4 Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ñ… Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ², Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ… Ñ‡ĞµÑ€ĞµĞ· Ğ±Ñ€Ğ¾ĞºĞµÑ€ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ RabbitMQ.
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend  â”‚â”€â”€â”€â”€â”€â–¶â”‚  API Service â”‚â”€â”€â”€â”€â”€â–¶â”‚   RabbitMQ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚                               â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚    Consumer    â”‚            â”‚    Aggregator    â”‚
                            â”‚    Service     â”‚            â”‚     Service      â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚                               â”‚
                                    â–¼                               â–¼
                            OpenWeatherMap API          ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
```

```mermaid
graph TD
    subgraph Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ñ‹
        Frontend -- 1. HTTP Request --> API_Service
        API_Service -- 2. Messages --> RabbitMQ
        RabbitMQ -- 3. Messages --> Consumer_Service
        Consumer_Service -- 4. HTTP Request --> OpenWeatherMap
        OpenWeatherMap -- 5. HTTP Response --> Consumer_Service
        Consumer_Service -- 6. Messages --> RabbitMQ
        RabbitMQ -- 7. Messages --> Aggregator_Service
        Aggregator_Service -- 8. Message --> RabbitMQ
        RabbitMQ -- 9. Message --> API_Service
        API_Service -- 10. HTTP Response --> Frontend
    end

    subgraph Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
        OpenWeatherMap
    end

    style Frontend fill:#f9f,stroke:#333,stroke-width:2px
    style API_Service fill:#ccf,stroke:#333,stroke-width:2px
    style Consumer_Service fill:#cfc,stroke:#333,stroke-width:2px
    style Aggregator_Service fill:#ffc,stroke:#333,stroke-width:2px
    style RabbitMQ fill:#f96,stroke:#333,stroke-width:2px
```

**ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**
1.  **Frontend** Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ HTTP POST-Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ ÑĞ¾ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¾Ğ² Ğ½Ğ° **Weather API Service**.
2.  **API Service** Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ `correlationId`, Ñ€Ğ°Ğ·Ğ±Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ (Ğ¿Ğ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ Ğ½Ğ° Ğ³Ğ¾Ñ€Ğ¾Ğ´) Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¸Ñ… Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ `weather.request.queue` Ğ² **RabbitMQ**.
3.  **Weather Consumer Service** Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¸Ğ· ÑÑ‚Ğ¾Ğ¹ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸.
4.  Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ **Consumer Service** Ğ´ĞµĞ»Ğ°ĞµÑ‚ HTTP-Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº Ğ²Ğ½ĞµÑˆĞ½ĞµĞ¼Ñƒ **OpenWeatherMap API**.
5.  ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ğ² Ğ¾Ñ‚Ğ²ĞµÑ‚, **Consumer Service** Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ-Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞµĞ³Ğ¾ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ `weather.response.queue`.
6.  **Weather Aggregator Service** ÑĞ»ÑƒÑˆĞ°ĞµÑ‚ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ², Ğ½Ğ°ĞºĞ°Ğ¿Ğ»Ğ¸Ğ²Ğ°Ñ Ğ¸Ñ… Ğ² ÑĞ²Ğ¾ĞµĞ¼ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ¸ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒÑ Ğ¿Ğ¾ `correlationId`.
7.  ĞšĞ¾Ğ³Ğ´Ğ° Ğ²ÑĞµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ñ‹ (ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ñ€Ğ°Ğ²ĞµĞ½ Ğ¾Ğ±Ñ‰ĞµĞ¼Ñƒ Ñ‡Ğ¸ÑĞ»Ñƒ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¾Ğ²), **Aggregator Service** Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡ĞµÑ‚.
8.  Ğ­Ñ‚Ğ¾Ñ‚ Ğ¾Ñ‚Ñ‡ĞµÑ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ `weather.aggregated.queue`.
9.  **API Service** ÑĞ»ÑƒÑˆĞ°ĞµÑ‚ ÑÑ‚Ñƒ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ, Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡ĞµÑ‚ Ğ¸, Ğ½Ğ°ĞºĞ¾Ğ½ĞµÑ†, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞµĞ³Ğ¾ Ğ² Ğ²Ğ¸Ğ´Ğµ HTTP-Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ½Ğ° **Frontend**.

---

java -version
```
java version "23.0.1" 2024-10-15
Java(TM) SE Runtime Environment (build 23.0.1+11-39)
Java HotSpot(TM) 64-Bit Server VM (build 23.0.1+11-39, mixed mode, sharing)
```

mvn -version
```
Apache Maven 3.9.9 (8e8579a9e76f7d015ee5ec7bfcdc97d260186937)
Maven home: C:\home\app\maven\apache-maven-3.9.9
Java version: 23.0.1, vendor: Oracle Corporation, runtime: C:\Program Files\Java\jdk-23
Default locale: ru_RU, platform encoding: UTF-8
OS name: "windows 11", version: "10.0", arch: "amd64", family: "windows"
```

docker --version
```
Docker version 27.4.0, build bde2b89
```
## Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
#### Weather API Service (Ğ¿Ğ¾Ñ€Ñ‚ 8080)

- REST API endpoint: POST /api/weather/forecast
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Correlation ID Ğ´Ğ»Ñ ÑĞ²ÑĞ·Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
- Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ° Message Router
- ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğµ Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· CompletableFuture

```
javapublic AggregatedWeatherReport processWeatherRequest(WeatherRequestDto requestDto) {
    String correlationId = UUID.randomUUID().toString();
    CompletableFuture<AggregatedWeatherReport> future = new CompletableFuture<>();
    pendingRequests.put(correlationId, future);
    
    // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ°
    for (String city : requestDto.getCities()) {
        WeatherMessage message = new WeatherMessage(correlationId, city, totalCities, ...);
        rabbitTemplate.convertAndSend(exchangeName, requestRoutingKey, message);
    }
    
    return future.get(60, TimeUnit.SECONDS);
}
```

#### Weather Consumer Service (Ğ¿Ğ¾Ñ€Ñ‚ 8081)

- ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¸Ğ· Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ weather.request.queue
- Ğ’Ñ‹Ğ·Ğ¾Ğ² OpenWeatherMap API
- Manual acknowledgment Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
- Rate limiting: 1 Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ/ÑĞµĞºÑƒĞ½Ğ´Ñƒ

ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:
```
yamlspring:
  rabbitmq:
    listener:
      simple:
        concurrency: 5          # 5 Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²
        max-concurrency: 10
        acknowledge-mode: manual
```

#### Weather Aggregator Service (Ğ¿Ğ¾Ñ€Ñ‚ 8082)

- Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ° Aggregator
- Ğ¡Ğ±Ğ¾Ñ€ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² Ğ¿Ğ¾ Correlation ID
- Completion Strategy: receivedCount >= totalCities
- Timeout-based cleanup: ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑƒÑÑ‚Ğ°Ñ€ĞµĞ²ÑˆĞ¸Ñ… ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²

ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğ¹ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼:
```
javasynchronized (context) {
    context.addResponse(response);
    if (context.isComplete()) {
        AggregatedWeatherReport report = context.buildReport();
        rabbitTemplate.convertAndSend(exchangeName, aggregatedRoutingKey, report);
        aggregationStore.remove(correlationId);
    }
}
```

### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸
ĞÑ‡ĞµÑ€ĞµĞ´Ğ¸ RabbitMQ:

- weather.request.queue - Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ñ‹
- weather.response.queue - Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ¾Ñ‚ Consumer
- weather.aggregated.queue - Ğ°Ğ³Ñ€ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹
- weather.request.dlq - Dead Letter Queue

#### Ğ ĞµÑˆĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:

- Ğ¡ĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ LocalDateTime - Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ jackson-datatype-jsr310
- ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ĞµĞ¹ - Ñ€ĞµÑˆĞµĞ½ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² DLX
- Manual acknowledgment - ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° basicAck/basicNack


---

## Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ñ
### Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 1: ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¸ Dead Letter Queue (DLQ)
Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:
```
java@Bean
public Queue requestQueue() {
    Map<String, Object> args = new HashMap<>();
    args.put("x-dead-letter-exchange", exchangeName);
    args.put("x-dead-letter-routing-key", "weather.request.dlq");
    return QueueBuilder.durable(requestQueueName).withArguments(args).build();
}
DLQ Listener:
java@RabbitListener(queues = "weather.request.dlq")
public void handleDeadLetter(WeatherMessage weatherMessage) {
    log.error("=== DEAD LETTER MESSAGE RECEIVED ===");
    log.error("City: {}", weatherMessage.getCity());
    // Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ´Ğ°Ğ»ÑŒĞ½ĞµĞ¹ÑˆĞ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°: ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”, ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ
}
```

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:

- ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ğ² DLQ
- ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ñ… Ñ†Ğ¸ĞºĞ»Ğ¾Ğ² Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
- Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¿Ğ¾ÑÑ‚Ñ„Ğ°ĞºÑ‚ÑƒĞ¼


---

### Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 2: ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Consumerâ€™Ğ°
ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:
```
yamlspring:
  rabbitmq:
    listener:
      simple:
        concurrency: 5
        max-concurrency: 10
        prefetch: 5
```

#### Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ”Ğ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ | ĞŸĞ¾ÑĞ»Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ |
|----------|-------------------|----------------------|
| ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¾Ğ² Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ | 1 | 5 |
| Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ 10 Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¾Ğ² | ~10 ÑĞµĞºÑƒĞ½Ğ´ | ~2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹ |

**Ğ›Ğ¾Ğ³Ğ¸ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ğ°ÑÑ‚ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½ÑƒÑ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ:**
```
INFO : Received weather request for city: London
INFO : Received weather request for city: Paris
INFO : Received weather request for city: Moscow
INFO : Received weather request for city: Tokyo
INFO : Received weather request for city: New York
```

---

### Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 3: Ğ’Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ğµ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:

Spring Boot Cache + Caffeine Cache
TTL: 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚
Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²: sync=true

ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:
```
java@Cacheable(value = "weather", key = "#city", sync = true)
public OpenWeatherMapResponse getWeatherForCity(String city) {
    rateLimiter.acquire();
    log.info("ğŸŒ CACHE MISS - Fetching from API for: {}", city);
    // ... HTTP Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº API
}
```

#### Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:

**Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ:** `London, Paris, London, Moscow, Paris, London`

**Ğ›Ğ¾Ğ³Ğ¸:**
```
ğŸŒ CACHE MISS - Fetching weather data from API for city: London
âœ… Successfully fetched and CACHED weather for city: London

ğŸŒ CACHE MISS - Fetching weather data from API for city: Paris
âœ… Successfully fetched and CACHED weather for city: Paris

(London Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ñ€Ğ°Ğ· - Ğ‘Ğ•Ğ— "CACHE MISS" - Ğ¸Ğ· ĞºÑÑˆĞ°)

ğŸŒ CACHE MISS - Fetching weather data from API for city: Moscow
âœ… Successfully fetched and CACHED weather for city: Moscow

(Paris Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ñ€Ğ°Ğ· - Ğ‘Ğ•Ğ— "CACHE MISS" - Ğ¸Ğ· ĞºÑÑˆĞ°!
(London Ñ‚Ñ€ĞµÑ‚Ğ¸Ğ¹ Ñ€Ğ°Ğ· - Ğ‘Ğ•Ğ— "CACHE MISS" - Ğ¸Ğ· ĞºÑÑˆĞ°)
```

#### ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ: `sync=true`

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** ĞŸÑ€Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°Ğ»Ğ¸ Ğ¾Ğ´Ğ¸Ğ½ Ğ³Ğ¾Ñ€Ğ¾Ğ´, ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ñ‹ HTTP-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ².

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** `sync=true` ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ĞºÑÑˆÑƒ Ğ¿Ğ¾ ĞºĞ»ÑÑ‡Ñƒ:
```
ĞŸĞ¾Ñ‚Ğ¾Ğº 1: London â†’ Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ ĞºĞ»ÑÑ‡ â†’ HTTP Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ â†’ ĞšÑÑˆĞ¸Ñ€ÑƒĞµÑ‚ â†’ Ğ Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚
ĞŸĞ¾Ñ‚Ğ¾Ğº 2: London â†’ Ğ–Ğ´Ñ‘Ñ‚ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºÑƒ â†’ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¸Ğ· ĞºÑÑˆĞ° âœ…
ĞŸĞ¾Ñ‚Ğ¾Ğº 3: London â†’ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¸Ğ· ĞºÑÑˆĞ° âœ…
```

---

### Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 4: Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ Aggregatorâ€™Ğ°

ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:

Ğ•ÑĞ»Ğ¸ Ğ¾Ğ´Ğ½Ğ¾ Ğ¸Ğ· ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ñ‚ĞµÑ€ÑĞµÑ‚ÑÑ, Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ¾Ñ€ Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾ Ğ¶Ğ´Ğ°Ğ». cleanupExpiredAggregations Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ ÑƒĞ´Ğ°Ğ»ÑĞ» ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ±ĞµĞ· Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°.

Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:

ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ DTO:
```
javapublic class AggregatedWeatherReport {
    private String correlationId;
    private int totalCities;
    private List<WeatherData> reports;
    private boolean partial;           // ĞĞĞ’ĞĞ•
    private String partialReason;      // ĞĞĞ’ĞĞ•
    // ...
}
```
Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ñ‡Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²:
```
java@Scheduled(fixedDelay = 30000)
public void cleanupExpiredAggregations() {
    aggregationStore.forEach((correlationId, context) -> {
        if (secondsElapsed > timeoutSeconds) {
            String partialReason = String.format(
                "Timeout after %ds: received only %d/%d responses. %d responses missing.",
                timeoutSeconds, context.receivedCount, context.totalCities, missingResponses
            );
            
            AggregatedWeatherReport partialReport = context.buildReport(true, partialReason);
            rabbitTemplate.convertAndSend(exchangeName, aggregatedRoutingKey, partialReport);
            
            aggregationStore.remove(correlationId);
        }
    });
}
```
ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´:
ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ:
```
javascriptif (report.partial) {
    const warningDiv = document.createElement('div');
    warningDiv.classList.add('partial-warning');
    warningDiv.innerHTML = `
        <strong>âš ï¸ ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ: Ğ§Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚</strong>
        <p>${report.partialReason}</p>
    `;
    resultsSection.insertBefore(warningDiv, summaryInfoDiv);
}
```
Ğ‘ĞµĞ¹Ğ´Ğ¶ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°:
```
javascriptconst statusBadge = report.partial 
    ? 'âš ï¸ Ğ§Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚' 
    : 'âœ“ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚';
```
<img width="1125" height="782" alt="image" src="https://github.com/user-attachments/assets/857e0819-6b7b-40cf-a9bc-b8fc60e533f0" />

![Uploading image.pngâ€¦]()


---

### Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 5 (Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾Ğµ): ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ½Ğ° WebSockets Ğ´Ğ»Ñ Real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹

ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°

Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ HTTP Request-Reply Ğ´Ğ»Ñ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ğ¿Ğ»Ğ¾Ñ…Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Ğ¾Ğ¿Ñ‹Ñ‚ (UX), Ğ·Ğ°ÑÑ‚Ğ°Ğ²Ğ»ÑÑ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ´Ğ¾Ğ»Ğ³Ğ¾ Ğ¶Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°.

Ğ¦ĞµĞ»ÑŒ

Ğ’Ğ½ĞµĞ´Ñ€Ğ¸Ñ‚ÑŒ WebSockets Ğ´Ğ»Ñ Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²ÑƒĞ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ Ğ¼ĞµĞ¶Ğ´Ñƒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ¼ Ğ¸ weather-api-service, Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ğ¿Ğ¾ Ğ¼ĞµÑ€Ğµ Ğ¸Ñ… Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸.

Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (ĞĞ±Ğ·Ğ¾Ñ€)

**Backend (weather-api-service) ĞĞ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ:**

- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ spring-boot-starter-websocket.

- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ WebSocket-Ñ…ĞµĞ½Ğ´Ğ»ĞµÑ€ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¸Ğ¼Ğ¸ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸.

- Ğ¡ĞµÑ€Ğ²Ğ¸Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ CompletableFuture, Ğ° Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ WebSocketSession ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°, ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ correlationId.

- ĞŸÑ€Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¸Ğ· weather.aggregated.queue, API Service Ğ¸Ñ‰ĞµÑ‚ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½ÑƒÑ ÑĞµÑÑĞ¸Ñ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞµĞ¹ JSON-Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ.

**Frontend (weather-frontend) ĞĞ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ:**

- Ğ—Ğ°Ğ¼ĞµĞ½ĞµĞ½ fetch Ğ½Ğ° new WebSocket("ws://localhost:8080/ws/weather").

- Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° socket.onmessage Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ° Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹) Ğ¸ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI.

- Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¾Ğ±Ñ‰ĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ°, Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ° Ğ¸ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ° Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾/Ñ‡Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ°.

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹

<img width="1266" height="908" alt="image" src="https://github.com/user-attachments/assets/fb165edf-adc6-4728-931f-ee2917d0025a" />

---


<img width="1076" height="334" alt="image" src="https://github.com/user-attachments/assets/a6ea1edf-3d91-431f-b914-911cd6c65e94" />

---

1. Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ 5 Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¾Ğ²

ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ÑĞ²Ğ»ÑÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· ~1 ÑĞµĞºÑƒĞ½Ğ´Ñƒ Ğ¿Ğ¾ÑĞ»Ğµ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸.

Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ: ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´ Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ Ğ¿Ğ¾ Ğ¼ĞµÑ€Ğµ ĞµĞ³Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Consumer'Ğ¾Ğ¼ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· WebSocket.

---

2. Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ (20 Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¾Ğ²)

ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ, Ğ° Ğ½Ğµ Ğ·Ğ°Ğ²Ğ¸ÑÑˆĞ¸Ğ¹ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€.

Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ñ‹Ğ¹ UX: ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€ Ğ¸ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑÑ‚ÑÑ Ğ¿Ğ»Ğ°Ğ²Ğ½Ğ¾ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, 5% â†’ 10% â†’ 15%...).

ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚: Ğ¡ WebSockets Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Real-time Publishing, Ñ‡Ñ‚Ğ¾ ÑƒÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¾ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñƒ "Ğ±ÑƒÑ‚Ñ‹Ğ»Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ³Ğ¾Ñ€Ğ»Ñ‹ÑˆĞºĞ°" Ğ² Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¼ Ğ¿ÑƒÑ‚Ğ¸ (Ğ¾Ñ‚ Aggregator Ğº Frontend) Ğ¸ Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ ÑƒĞ»ÑƒÑ‡ÑˆĞ¸Ğ»Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Ğ¾Ğ¿Ñ‹Ñ‚.

---

### Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´

#### ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½:

**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:**
- Tailwind CSS Ğ´Ğ»Ñ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ UI
- ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹

**ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**

1. **Ğ§Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²:**
   - Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ğ¾ÑĞ²Ğ»ÑÑÑ‚ÑÑ Ğ¿Ğ¾ Ğ¼ĞµÑ€Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
   - ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ
   - Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸

2. **Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ†Ğ¸Ñ:**
```
   âœ“ London: 9.46Â°C, Broken clouds     [Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾]
   âœ“ Paris: 2.73Â°C, Mist                [Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾]
   âš  New York: 404 Not Found            [ĞÑˆĞ¸Ğ±ĞºĞ°]
   â³ Tokyo: ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ...           [ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ]
```

3. **ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€:**
```
   ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ: 3 Ğ¸Ğ· 5                     60%
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°:
html<div class="bg-gray-800 p-6 rounded-2xl">
    <div class="flex justify-between items-center mb-4">
        <h2>Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ <span class="text-blue-400">ID: corr-123</span></h2>
        <div class="px-3 py-1 bg-yellow-800 text-yellow-300 rounded-full">
            Ğ’ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ
        </div>
    </div>
    
    <div class="progress-bar">
        <div style="width: 60%" class="bg-blue-500 transition-all duration-700">
        </div>
    </div>
    
    <!-- ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² -->
</div>
```

---

## Ğ’Ñ‹Ğ²Ğ¾Ğ´Ñ‹

âœ… **Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ‹:**
1. Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ñ RabbitMQ
2. Dead Letter Queue Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ½Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
3. ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Consumer (5 Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²)
4. ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ (`sync=true`)
5. Ğ§Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ñ€Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚Ğµ Aggregator
6. Real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· WebSockets
7. Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ responsive Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´ Ñ Ñ‡Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¼ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¾Ğ¼

âœ… **Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ EIP:**
- Message Channel
- Message Router
- Request-Reply
- Aggregator
- Dead Letter Queue
- Real-time Publisher (Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ WebSockets)

---

## ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
```
weather-aggregator-system/
â”œâ”€â”€ weather-api-service/                           # Backend REST API
â”‚ â”œâ”€â”€ src/main/java/com/weather/api/
â”‚ â”‚ â”œâ”€â”€ config/                                    # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ RabbitMQ
â”‚ â”‚ â”‚ â”œâ”€â”€ RabbitMQConfig.java
â”‚ â”‚ â”‚ â”œâ”€â”€ WebSocketConfig.java
â”‚ â”‚ â”œâ”€â”€ controller/                                # REST ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ñ‹
â”‚ â”‚ â”‚ â”œâ”€â”€ WeatherController.java
â”‚ â”‚ â”œâ”€â”€ dto/                                         # Data Transfer Objects
â”‚ â”‚ â”‚ â”œâ”€â”€ AggregatedWeatherReport.java
â”‚ â”‚ â”‚ â”œâ”€â”€ WeatherData.java
â”‚ â”‚ â”‚ â”œâ”€â”€ WeatherMessage.java
â”‚ â”‚ â”‚ â”œâ”€â”€ WeatherRequestDto.java
â”‚ â”‚ â””â”€â”€ handler/
â”‚ â”‚ â”‚ â”œâ”€â”€ WeatherWebSocketHandler.java
â”‚ â”‚ â””â”€â”€ service/                                 # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚ â”‚ â”‚ â”œâ”€â”€ WeatherService.java
â”‚ â”œâ”€â”€ pom.xml
â”‚ â””â”€â”€ WeatherApiApplication.java
â”‚
â”œâ”€â”€ weather-consumer-service/ # Consumer Ğ´Ğ»Ñ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ° Weather API
â”‚ â”œâ”€â”€ src/main/java/com/weather/consumer/
â”‚ â”‚ â”œâ”€â”€ client/ # HTTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Weather API
WeatherApiClient.java
â”‚ â”‚ â”œâ”€â”€ config/ # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
RabbitMQConfig.java
CacheConfig.java
â”‚ â”‚ â”œâ”€â”€ dto/ # DTO
weather-consumer-service\src\main\java\com\weather\consumer\dto\OpenWeatherMapResponse.java
weather-consumer-service\src\main\java\com\weather\consumer\dto\WeatherMessage.java
C:\Users\diamo\PycharmProjects\Rabbit\weather-consumer-service\src\main\java\com\weather\consumer\dto\WeatherResponse.java

â”‚ â”‚ â””â”€â”€ service/ # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
weather-consumer-service\src\main\java\com\weather\consumer\service\DeadLetterQueueService.java
weather-consumer-service\src\main\java\com\weather\consumer\service\WeatherConsumerService.java

weather-consumer-service\src\main\java\com\weather\consumer\WeatherConsumerApplication.java
â”‚ â””â”€â”€ pom.xml

â”œâ”€â”€ weather-aggregator-service/ # Aggregator Ğ´Ğ»Ñ ÑĞ±Ğ¾Ñ€Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
â”‚ â”œâ”€â”€ src/main/java/com/weather/aggregator/
â”‚ â”‚ â”œâ”€â”€ config/ # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
RabbitMQConfig.java
â”‚ â”‚ â”œâ”€â”€ dto/ # DTO
weather-aggregator-service\src\main\java\com\weather\aggregator\dto\AggregatedWeatherReport.java
weather-aggregator-service\src\main\java\com\weather\aggregator\dto\WeatherData.java
weather-aggregator-service\src\main\java\com\weather\aggregator\dto\WeatherResponse.java
â”‚ â”‚ â””â”€â”€ service/ # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸
weather-aggregator-service\src\main\java\com\weather\aggregator\service\WeatherAggregatorService.java

weather-aggregator-service\src\main\java\com\weather\aggregator\WeatherAggregatorApplication.java
â”‚ â””â”€â”€ pom.xml
â”œâ”€â”€ weather-frontend/ # Frontend Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
â”‚ â”œâ”€â”€ css/style.css
â”‚ â”œâ”€â”€ js/app.js
â”‚ â””â”€â”€ index.html
â”œâ”€â”€ docker-compose.yml # Docker Compose Ğ´Ğ»Ñ RabbitMQ


weather-aggregator-system/
â”œâ”€â”€ weather-api-service/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Backend REST API (Producer)
â”‚   â”œâ”€â”€ src/main/java/com/weather/api/
â”‚   â”‚   â”œâ”€â”€ config/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ±Ñ€Ğ¾ĞºĞµÑ€Ğ° Ğ¸ ÑĞ¾ĞºĞµÑ‚Ğ¾Ğ²
â”‚   â”‚   â”‚ â”œâ”€â”€ **RabbitMQConfig.java** Â  Â  Â  Â  Â  Â  Â  Â # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¾Ñ‡ĞµÑ€ĞµĞ´ĞµĞ¹ Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
â”‚   â”‚   â”‚ â””â”€â”€ **WebSocketConfig.java** Â  Â  Â  Â  Â  Â  Â # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° WebSocket-ÑĞµÑ€Ğ²ĞµÑ€Ğ° (Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²)
â”‚   â”‚   â”œâ”€â”€ controller/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… REST-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
â”‚   â”‚   â”‚ â””â”€â”€ **WeatherController.java** Â  Â  Â  Â  Â  Â # ĞŸÑ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¾Ñ‚ Frontend, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ² RabbitMQ
â”‚   â”‚   â”œâ”€â”€ dto/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # ĞĞ±ÑŠĞµĞºÑ‚Ñ‹ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚   â”‚ â”œâ”€â”€ **AggregatedWeatherReport.java** Â  Â # Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ³Ñ€ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡ĞµÑ‚ (Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ğ½Ğ° Frontend)
â”‚   â”‚   â”‚ â”œâ”€â”€ **WeatherData.java** Â  Â  Â  Â  Â  Â  Â  Â  Â # ĞŸÑ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğµ
â”‚   â”‚   â”‚ â”œâ”€â”€ **WeatherMessage.java** Â  Â  Â  Â  Â  Â  Â  # Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼Ğ¾Ğµ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ
â”‚   â”‚   â”‚ â””â”€â”€ **WeatherRequestDto.java** Â  Â  Â  Â  Â  Â # DTO Ğ´Ğ»Ñ Ğ²Ñ…Ğ¾Ğ´ÑÑ‰ĞµĞ³Ğ¾ REST-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ğ³Ğ¾Ñ€Ğ¾Ğ´)
â”‚   â”‚   â””â”€â”€ service/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â”‚   â”‚ â””â”€â”€ **WeatherService.java** Â  Â  Â  Â  Â  Â  Â  # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ WebSockets
â”‚   â”œâ”€â”€ **pom.xml** Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Maven-Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (Web, RabbitMQ, WebSocket)
â”‚   â””â”€â”€ **WeatherApiApplication.java** Â  Â  Â  Â  Â  Â  Â # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ² API-ÑĞµÑ€Ğ²Ğ¸Ñ
â”‚
â”œâ”€â”€ weather-consumer-service/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Consumer Ğ´Ğ»Ñ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ° Weather API
â”‚   â”œâ”€â”€ src/main/java/com/weather/consumer/
â”‚   â”‚   â”œâ”€â”€ client/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # HTTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… API
â”‚   â”‚   â”‚ â””â”€â”€ **WeatherApiClient.java** Â  Â  Â  Â  Â  Â  Â  # Ğ’Ñ‹Ğ·Ğ¾Ğ² ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ½Ğ¸Ñ… Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ½Ñ‹Ñ… API (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, OpenWeatherMap)
â”‚   â”‚   â”œâ”€â”€ config/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚   â”‚ â”œâ”€â”€ **RabbitMQConfig.java** Â  Â  Â  Â  Â  Â  Â  Â # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ Ğ´Ğ»Ñ Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
â”‚   â”‚   â”‚ â””â”€â”€ **CacheConfig.java** Â  Â  Â  Â  Â  Â  Â  Â  Â # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Redis Ğ¸Ğ»Ğ¸ Caffeine)
â”‚   â”‚   â”œâ”€â”€ dto/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Data Transfer Objects
â”‚   â”‚   â”‚ â”œâ”€â”€ **OpenWeatherMapResponse.java** Â  Â  Â  # DTO Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ¾Ñ‚ Ğ²Ğ½ĞµÑˆĞ½ĞµĞ³Ğ¾ API
â”‚   â”‚   â”‚ â”œâ”€â”€ **WeatherMessage.java** Â  Â  Â  Â  Â  Â  Â  # Ğ’Ñ…Ğ¾Ğ´ÑÑ‰ĞµĞµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ (Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ)
â”‚   â”‚   â”‚ â””â”€â”€ **WeatherResponse.java** Â  Â  Â  Â  Â  Â  Â # Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼Ğ¾Ğ³Ğ¾ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ¾Ñ€Ñƒ
â”‚   â”‚   â””â”€â”€ service/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
â”‚   â”‚   â”‚ â”œâ”€â”€ **DeadLetterQueueService.java** Â  Â  # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº (DLQ)
â”‚   â”‚   â”‚ â””â”€â”€ **WeatherConsumerService.java** Â  Â  Â  # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞ»ÑƒÑˆĞ°Ñ‚ĞµĞ»ÑŒ RabbitMQ, Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ÑÑ‰Ğ¸Ğ¹ API Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‰Ğ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ¾Ñ€Ñƒ
â”‚   â”œâ”€â”€ **WeatherConsumerApplication.java** Â  Â  Â  Â  # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ² Consumer-ÑĞµÑ€Ğ²Ğ¸Ñ
â”‚   â””â”€â”€ **pom.xml** Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Maven-Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (RabbitMQ, HTTP Client, Cache)
â”‚
â”œâ”€â”€ weather-aggregator-service/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Aggregator Ğ´Ğ»Ñ ÑĞ±Ğ¾Ñ€Ğ° Ğ¸ ÑƒÑÑ€ĞµĞ´Ğ½ĞµĞ½Ğ¸Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
â”‚   â”œâ”€â”€ src/main/java/com/weather/aggregator/
â”‚   â”‚   â”œâ”€â”€ config/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚   â”‚ â””â”€â”€ **RabbitMQConfig.java** Â  Â  Â  Â  Â  Â  Â  Â # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ Ğ´Ğ»Ñ Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² Ğ¾Ñ‚ Consumer
â”‚   â”‚   â”œâ”€â”€ dto/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Data Transfer Objects
â”‚   â”‚   â”‚ â”œâ”€â”€ **AggregatedWeatherReport.java** Â  Â # Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ³Ñ€ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡ĞµÑ‚
â”‚   â”‚   â”‚ â”œâ”€â”€ **WeatherData.java** Â  Â  Â  Â  Â  Â  Â  Â  Â # ĞŸÑ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
â”‚   â”‚   â”‚ â””â”€â”€ **WeatherResponse.java** Â  Â  Â  Â  Â  Â  Â # ĞÑ‚Ğ²ĞµÑ‚ Ğ¾Ñ‚ Consumer
â”‚   â”‚   â””â”€â”€ service/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”‚   â”‚ â””â”€â”€ **WeatherAggregatorService.java** Â  # Ğ¡Ğ»ÑƒÑˆĞ°Ñ‚ĞµĞ»ÑŒ RabbitMQ, ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ÑÑ‰Ğ¸Ğ¹ N Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ², Ğ°Ğ³Ñ€ĞµĞ³Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¹ Ğ¸Ñ… Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‰Ğ¸Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡ĞµÑ‚ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾ Ğ² Weather API (Ğ´Ğ»Ñ WebSockets)
â”‚   â”œâ”€â”€ **WeatherAggregatorApplication.java** Â  Â  Â  # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ² Aggregator-ÑĞµÑ€Ğ²Ğ¸Ñ
â”‚   â””â”€â”€ **pom.xml** Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Maven-Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (RabbitMQ, Data Structures)
â”‚
â”œâ”€â”€ weather-frontend/ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Frontend Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ **css/style.css** Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°
â”‚   â”œâ”€â”€ **js/app.js** Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # JavaScript-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° REST, Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ WebSocket, Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ)
â”‚   â””â”€â”€ **index.html** Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
â”‚
â””â”€â”€ **docker-compose.yml** Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # Docker Compose Ğ´Ğ»Ñ RabbitMQ (Ğ¸, Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾, Redis/Postgres)

<img width="1266" height="908" alt="image" src="https://github.com/user-attachments/assets/fb165edf-adc6-4728-931f-ee2917d0025a" />


<img width="1076" height="334" alt="image" src="https://github.com/user-attachments/assets/a6ea1edf-3d91-431f-b914-911cd6c65e94" />
